# Feel-Archive 서비스 기획 스펙 문서

> **문서 버전**: 1.0
> **작성일**: 2026-01-19
> **서비스명**: 미확정 (가칭: Feel-Archive)

---

## 1. 프로젝트 개요

### 1.1 서비스 정의
**공간 기반 감정 아카이빙 플랫폼**

사용자의 감정을 특정 장소와 연결하여 기록하고, 다른 사람들의 경험을 발견할 수 있는 웹 서비스입니다.

### 1.2 프로젝트 목적
- **목적**: Java/Spring 기반 회사 이직을 위한 사이드 프로젝트
- **주요 어필 포인트**:
  - GIS 공간 쿼리 (모빌리티 도메인 연관성)
  - DDD 아키텍처
  - 이벤트 기반 시스템
  - 테스트 커버리지
  - CI/CD 파이프라인

### 1.3 타겟 사용자
- **연령대**: 20-30대 전체
- **예상 규모**: 극소규모 (10-100명)
- **사용 맥락**: 일기/기록 문화에 관심 있는 세대

### 1.4 일정
- **목표 기간**: 4주
- **투입 시간**: 평일 1-2시간, 주말 3-5시간

---

## 2. 핵심 기능

### 2.1 감정 아카이브 (Archive)

#### 감정 태그 시스템
- **선택 방식**: 미리 정의된 태그 중 **복수 선택** 가능
- **감정 목록** (한국어 감정 단어 중심):
  - 행복
  - 슬픔
  - 불안함
  - 화난
  - 차분한
  - 신난
  - 외로운
  - 감사한
  - 평온
  - 설렘
  - 그리움
  - *(추가 검토 가능)*

#### 장소 기록
- **정밀도**: 사용자가 직접 선택 (동네 수준 ~ 구체적 스팟)
- **기록 방식**:
  - 현장 기록 (GPS 기반)
  - 회상 기록 (지도 검색으로 장소 선택)
- **위치 노출 수준**: 공개 글 작성 시 노출 수준 선택 가능

#### 게시글 구성
| 항목 | 설명 |
|------|------|
| 감정 태그 | 1개 이상 필수 선택 |
| 장소 | 필수 (정밀도 선택 가능) |
| 텍스트 | 긴 글 허용 (2000자 이상) |
| 사진 | 선택적 첨부 |
| 공개 설정 | 작성 시 필수 선택 (공개/비공개) |

#### 수정/삭제 정책
- **아카이브 글**: 자유롭게 수정/삭제 가능
- **삭제 방식**: Soft Delete (배치로 정리)

---

### 2.2 탐색 기능 (Explore)

#### 탐색 뷰
- **지도 뷰**: Kakao Maps 기반, 마커로 위치 표시
- **피드 뷰**: SNS 스타일 스크롤 피드
- **뷰 전환**: 두 뷰 간 자유롭게 전환 가능

#### 필터/정렬 옵션
- 감정별 필터
- 시간순 정렬 (최신순/오래된순)
- 거리순 정렬 (현재 위치 기준)
- 인기순 정렬 (좋아요 수 기준)

#### 사용자 상호작용
| 기능 | 설명 |
|------|------|
| 좋아요 | 공감 표시 |
| 스크랩 | 본인 컬렉션에 저장 |
| 댓글 | **미지원** |
| 팔로우 | **미지원** (콘텐츠 중심) |

---

### 2.3 타임캡슐 (Time Capsule)

#### 기능 설명
미래의 자신에게 보내는 감정 기록. 설정한 시간이 지나면 자동으로 열람 가능.

#### 상세 규칙
| 항목 | 설명 |
|------|------|
| 공개 대상 | **자신에게만** (커뮤니티 공개 불가) |
| 공개 시점 | 날짜 및 시간 직접 선택 (1시간 단위) |
| 수정 가능 기간 | 작성 후 **30분 이내**만 수정 가능 |
| 30분 이후 | 완전 잠금 (수정/삭제 불가) |
| 알림 | 타임캡슐 공개 시 알림 발송 |

---

### 2.4 월간 리포트 (Report)

#### 기능 설명
사용자의 감정 기록을 시각화하여 통계 정보 제공.

#### 제공 내용
- 월간 감정 흐름 그래프 (라인 차트)
- 감정별 분포 (바 차트/파이 차트)
- 기록 빈도 통계

#### 특징
- **분석 수준**: 단순 통계/시각화 (AI 인사이트 없음)
- **접근 방식**: 마이페이지에서 실시간 확인 가능
- **이메일 발송**: 미지원

---

## 3. 사용자 시스템

### 3.1 인증
- **방식**: 이메일/비밀번호 기반 회원가입
- **소셜 로그인**: 미지원

### 3.2 사용자 프로필
| 항목 | 필수 여부 |
|------|----------|
| 닉네임 | 필수 |
| 프로필 사진 | 선택 |
| 소개글 | 미지원 |

### 3.3 알림
- **지원 범위**: 타임캡슐 공개 알림만
- **좋아요/스크랩 알림**: 미지원

---

## 4. 기술 스펙

### 4.1 기술 스택

#### 프론트엔드
| 항목 | 선택 |
|------|------|
| 프레임워크 | Next.js |
| 스타일링 | 미정 (일반적인 구현) |
| 상태 관리 | 미정 (일반적인 구현) |
| 지도 | Kakao Maps JavaScript SDK |

#### 백엔드
| 항목 | 선택 |
|------|------|
| 언어/프레임워크 | Java / Spring Boot |
| 데이터베이스 | MySQL (공간 데이터 지원) |
| ORM | JPA + QueryDSL |
| 캐싱 | Redis (예정) |
| 메시지 큐 | 이벤트 기반 시스템 (알림 발송) |
| 배치 | Spring Batch |

#### 인프라
| 항목 | 선택 |
|------|------|
| 배포 환경 | AWS |
| 이미지 저장 | 서버 로컬 저장 |
| CI/CD | 구축 예정 |

### 4.2 백엔드 핵심 기술 요구사항

#### GIS 공간 쿼리
- **활용 시나리오**:
  - 반경 N km 내 게시글 검색
  - 가까운 마커 클러스터링
  - 지역별 통계 집계
- **기술**: MySQL Spatial Functions 또는 PostGIS 검토
- **중요도**: **최우선** (모빌리티 도메인 이직 연관)

#### DDD (Domain-Driven Design)
- **Bounded Context 분리**:
  - 회원 (Member)
  - 아카이브 (Archive)
  - 타임캡슐 (TimeCapsule)
  - 리포트 (Report)
  - 알림 (Notification)

#### Spring Batch
- **활용 시나리오**:
  - Soft Delete된 아카이브 글 정리 (물리적 삭제)
- **성능 테스트**: cronJob vs DB 스케줄러 비교 예정

#### 이벤트 기반 시스템
- **활용 시나리오**: 타임캡슐 공개 알림 발송
- **비동기 처리**: 메시지 큐 활용

#### 기타 구현 목표
- 캐싱 (Redis)
- 테스트 커버리지 확보
- 비동기 스레드 처리
- 동시성 제어
- CI/CD 파이프라인

### 4.3 프론트엔드 구현 방향
- **수준**: 일반적인 구현 (특별한 기술 요구사항 없음)
- **개발 방식**: AI 적극 활용

---

## 5. UI/UX 설계

### 5.1 디자인 시스템
- **기존 랜딩 디자인**: 참고용으로만 활용
- **실제 서비스**: 새로운 디자인 시스템 제작 필요

### 5.2 반응형
- **우선순위**: 데스크톱 우선
- **모바일**: 반응형으로 대응

### 5.3 테마
- **다크 모드**: 미지원 (라이트 모드만)

### 5.4 페이지 구성 (초안)
> *상세 페이지 구성은 개발 진행하며 확정*

예상 페이지:
1. 랜딩/온보딩
2. 로그인/회원가입
3. 홈 (탐색: 지도/피드 뷰)
4. 글 작성
5. 글 상세
6. 마이페이지
   - 내 아카이브
   - 내 타임캡슐
   - 스크랩
   - 월간 리포트
7. 설정

---

## 6. 데이터 모델 (초안)

### 6.1 핵심 엔티티

```
Member (회원)
├── id (PK)
├── email
├── password (암호화)
├── nickname
├── profileImageUrl
├── createdAt
└── updatedAt

Archive (아카이브 글)
├── id (PK)
├── memberId (FK)
├── content (텍스트)
├── latitude (위도)
├── longitude (경도)
├── locationName (장소명)
├── locationPrecision (노출 정밀도)
├── isPublic (공개 여부)
├── imageUrl
├── likeCount
├── createdAt
├── updatedAt
├── deletedAt (soft delete)
└── point (GEOMETRY - 공간 인덱스용)

ArchiveEmotion (아카이브-감정 매핑)
├── id (PK)
├── archiveId (FK)
└── emotionType (감정 타입)

TimeCapsule (타임캡슐)
├── id (PK)
├── memberId (FK)
├── content
├── latitude
├── longitude
├── locationName
├── imageUrl
├── scheduledAt (공개 예정 시간)
├── isOpened (열람 여부)
├── isLocked (잠금 여부 - 30분 후 true)
├── createdAt
└── updatedAt

TimeCapsuleEmotion (타임캡슐-감정 매핑)
├── id (PK)
├── timeCapsuleId (FK)
└── emotionType

Like (좋아요)
├── id (PK)
├── memberId (FK)
├── archiveId (FK)
└── createdAt

Scrap (스크랩)
├── id (PK)
├── memberId (FK)
├── archiveId (FK)
└── createdAt

Notification (알림)
├── id (PK)
├── memberId (FK)
├── type (알림 타입)
├── targetId (대상 ID)
├── isRead
└── createdAt
```

### 6.2 감정 타입 (Enum)
```java
public enum EmotionType {
    HAPPY,      // 행복
    SAD,        // 슬픔
    ANXIOUS,    // 불안함
    ANGRY,      // 화난
    CALM,       // 차분한
    EXCITED,    // 신난
    LONELY,     // 외로운
    GRATEFUL,   // 감사한
    PEACEFUL,   // 평온
    THRILLED,   // 설렘
    NOSTALGIC   // 그리움
}
```

---

## 7. API 엔드포인트 (초안)

### 7.1 인증
```
POST   /api/auth/signup          회원가입
POST   /api/auth/login           로그인
POST   /api/auth/logout          로그아웃
```

### 7.2 회원
```
GET    /api/members/me           내 정보 조회
PATCH  /api/members/me           내 정보 수정
```

### 7.3 아카이브
```
POST   /api/archives             글 작성
GET    /api/archives             글 목록 조회 (필터/정렬)
GET    /api/archives/{id}        글 상세 조회
PATCH  /api/archives/{id}        글 수정
DELETE /api/archives/{id}        글 삭제 (soft delete)
GET    /api/archives/map         지도용 마커 조회 (GIS)
GET    /api/archives/nearby      반경 내 글 조회 (GIS)
```

### 7.4 좋아요/스크랩
```
POST   /api/archives/{id}/like   좋아요 토글
POST   /api/archives/{id}/scrap  스크랩 토글
GET    /api/members/me/scraps    내 스크랩 목록
```

### 7.5 타임캡슐
```
POST   /api/timecapsules         타임캡슐 작성
GET    /api/timecapsules         내 타임캡슐 목록
GET    /api/timecapsules/{id}    타임캡슐 상세 조회
PATCH  /api/timecapsules/{id}    타임캡슐 수정 (30분 내)
```

### 7.6 리포트
```
GET    /api/reports/monthly      월간 리포트 조회
GET    /api/reports/emotions     감정 분포 통계
```

---

## 8. 비기능 요구사항

### 8.1 성능
- GIS 쿼리 최적화 (공간 인덱스 활용)
- 캐싱으로 조회 성능 개선

### 8.2 확장성
- 이벤트 기반 아키텍처로 서비스 간 느슨한 결합
- DDD로 도메인 분리

### 8.3 테스트
- 단위 테스트 커버리지 확보
- 통합 테스트 구현

### 8.4 배포
- CI/CD 파이프라인 구축
- AWS 인프라 구성

---

## 9. 우려 사항 및 트레이드오프

### 9.1 프로젝트 미완성 위험
- **원인**: 4주 내 모든 기능 + 고급 기술 적용 시도
- **대응**:
  - MVP 기능 우선 구현
  - 기술 스택은 점진적 적용
  - 미완성보다는 핵심 기능 완성도 우선

### 9.2 오버엔지니어링 위험
- **원인**: 이직용 어필을 위해 많은 기술 적용 시도
- **대응**:
  - 기능에 자연스럽게 녹아드는 기술만 적용
  - 불필요한 복잡도 지양
  - GIS + DDD + 이벤트 시스템에 집중

### 9.3 모빌리티 도메인 연관성
- **핵심 어필 포인트**: GIS 공간 쿼리
- **구현 방향**:
  - 반경 검색, 클러스터링 등 실무에서 사용하는 패턴 구현
  - 공간 인덱스 활용한 성능 최적화
  - MySQL Spatial 또는 PostGIS 실무 경험 확보

---

## 10. 미확정 사항

- [ ] 서비스명 확정
- [ ] 상세 페이지 구성 및 화면 설계
- [ ] 새로운 디자인 시스템 제작
- [ ] 감정 태그 최종 목록 확정
- [ ] 배치 작업 상세 스케줄 (cronJob vs DB 스케줄러 결정)
- [ ] 캐싱 전략 상세 설계
- [ ] AWS 인프라 구성 상세

---

## 11. 용어 정의

| 용어 | 설명 |
|------|------|
| 아카이브 | 감정이 담긴 장소 기록 (일반 게시글) |
| 타임캡슐 | 미래에 열어볼 수 있도록 예약된 감정 기록 |
| 감정 태그 | 미리 정의된 감정 분류 (행복, 슬픔 등) |
| 정밀도 | 위치 공개 수준 (동네 ~ 구체적 스팟) |
| Soft Delete | 물리적 삭제 없이 삭제 플래그로 표시 |

---

## 부록: 기술 결정 근거

### A. MySQL Spatial vs PostGIS
- **초기 선택**: MySQL Spatial
- **근거**:
  - MySQL 이미 선택됨
  - 기본 GIS 쿼리에 충분
  - 복잡한 GIS가 필요하면 PostGIS로 마이그레이션 검토

### B. 이미지 저장: 서버 로컬 vs S3
- **초기 선택**: 서버 로컬
- **근거**:
  - 극소규모 사용자 (10-100명)
  - 비용 최소화
  - 추후 S3 마이그레이션 용이하도록 추상화

### C. 신고 기능 미구현
- **근거**:
  - 극소규모로 운영 가능
  - 개발 리소스 핵심 기능에 집중
  - 추후 필요시 추가
